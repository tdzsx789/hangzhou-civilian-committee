# æ­å·å¸‚æ°‘å§”å‘˜ä¼š - Webå±•é¡¹Monorepoé¡¹ç›®

åŸºäº Lerna çš„ Monorepo æ¶æ„ï¼Œç»Ÿä¸€ç®¡ç†30ä¸ªReact Webå±•é¡¹ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
hangzhou-civilian-committee/
â”œâ”€â”€ packages/                    # æ‰€æœ‰å±•é¡¹ç›®å½•
â”‚   â”œâ”€â”€ exhibition-01/          # å±•é¡¹01
â”‚   â”œâ”€â”€ exhibition-02/          # å±•é¡¹02
â”‚   â””â”€â”€ ...                     # å±•é¡¹03-30
â”œâ”€â”€ scripts/                     # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ create-exhibition.js    # åˆ›å»ºæ–°å±•é¡¹çš„è„šæœ¬
â”œâ”€â”€ package.json                # æ ¹ç›®å½•é…ç½®
â”œâ”€â”€ lerna.json                  # Lernaé…ç½®
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ ¹ç›®å½•ä¾èµ–ï¼ˆLernaï¼‰
npm install

# å®‰è£…æ‰€æœ‰å±•é¡¹çš„ä¾èµ–
npm run bootstrap
```

### 2. åˆ›å»ºæ–°å±•é¡¹

```bash
# ä½¿ç”¨ä¸­æ–‡åç§°åˆ›å»ºå±•é¡¹ï¼ˆæ¨èï¼‰
npm run new Aé¦†å±•é¡¹1
npm run new Bé¦†å±•é¡¹2
npm run new äº’åŠ¨ä½“éªŒåŒº

# ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°å­—ç¼–å·
npm run new 01

# åˆ›å»ºå±•é¡¹åï¼Œéœ€è¦è¿›å…¥è¯¥ç›®å½•å®‰è£…ä¾èµ–
cd packages/Aé¦†å±•é¡¹1
npm install
```

### 3. è¿è¡Œå±•é¡¹

```bash
# è¿è¡Œæ‰€æœ‰å±•é¡¹ï¼ˆå¹¶è¡Œï¼‰
npm start

# è¿è¡Œå•ä¸ªå±•é¡¹
npm run start:single @hangzhou-civilian-committee/exhibition-01

# æˆ–è€…è¿›å…¥å…·ä½“å±•é¡¹ç›®å½•è¿è¡Œ
cd packages/exhibition-01
npm start
```

### 4. æ‰“åŒ…å±•é¡¹

```bash
# æ‰“åŒ…æ‰€æœ‰å±•é¡¹
npm run build

# æ‰“åŒ…æ‰€æœ‰å±•é¡¹ï¼ˆå¹¶è¡Œï¼Œæ›´å¿«ï¼‰
npm run build:all

# æ‰“åŒ…å•ä¸ªå±•é¡¹
cd packages/exhibition-01
npm run build
```

## ğŸ“ å¯ç”¨å‘½ä»¤

### æ ¹ç›®å½•å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `npm run bootstrap` | å®‰è£…æ‰€æœ‰å±•é¡¹çš„ä¾èµ– |
| `npm run build` | æ‰“åŒ…æ‰€æœ‰å±•é¡¹ï¼ˆä¸²è¡Œï¼‰ |
| `npm run build:all` | æ‰“åŒ…æ‰€æœ‰å±•é¡¹ï¼ˆå¹¶è¡Œï¼‰ |
| `npm start` | è¿è¡Œæ‰€æœ‰å±•é¡¹ï¼ˆå¹¶è¡Œï¼‰ |
| `npm run start:single <package-name>` | è¿è¡Œå•ä¸ªå±•é¡¹ |
| `npm run new <name>` | åˆ›å»ºæ–°å±•é¡¹ï¼ˆæ”¯æŒä¸­æ–‡ï¼Œå¦‚ï¼š`npm run new Aé¦†å±•é¡¹1`ï¼‰ |
| `npm run clean` | æ¸…ç†æ‰€æœ‰å±•é¡¹çš„node_modules |
| `npm run clean:build` | æ¸…ç†æ‰€æœ‰å±•é¡¹çš„æ„å»ºæ–‡ä»¶ |
| `npm test` | è¿è¡Œæ‰€æœ‰å±•é¡¹çš„æµ‹è¯• |
| `npm run lint` | è¿è¡Œæ‰€æœ‰å±•é¡¹çš„ä»£ç æ£€æŸ¥ |

### å•ä¸ªå±•é¡¹å‘½ä»¤

è¿›å…¥å…·ä½“å±•é¡¹ç›®å½•åï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†çš„ create-react-app å‘½ä»¤ï¼š

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `npm start` | å¯åŠ¨å¼€å‘æœåŠ¡å™¨ |
| `npm run build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ |
| `npm test` | è¿è¡Œæµ‹è¯• |
| `npm run eject` | å¼¹å‡ºé…ç½®ï¼ˆä¸å¯é€†ï¼‰ |

## ğŸ—ï¸ æ¶æ„è¯´æ˜

### Monorepo ä¼˜åŠ¿

1. **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰å±•é¡¹åœ¨åŒä¸€ä¸ªä»“åº“ä¸­ï¼Œä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œä»£ç å…±äº«
2. **ä¾èµ–ä¼˜åŒ–**ï¼šLerna å¯ä»¥ä¼˜åŒ–ä¾èµ–å®‰è£…ï¼Œé¿å…é‡å¤å®‰è£…
3. **æ‰¹é‡æ“ä½œ**ï¼šå¯ä»¥æ‰¹é‡è¿è¡Œã€æ„å»ºã€æµ‹è¯•æ‰€æœ‰å±•é¡¹
4. **ä»£ç å¤ç”¨**ï¼šå¯ä»¥åœ¨å±•é¡¹ä¹‹é—´å…±äº«å…¬å…±ç»„ä»¶å’Œå·¥å…·å‡½æ•°

### æŠ€æœ¯æ ˆ

- **Lerna**: Monorepo ç®¡ç†å·¥å…·
- **React**: UIæ¡†æ¶
- **Create React App**: Reactåº”ç”¨è„šæ‰‹æ¶
- **npm workspaces**: å·¥ä½œåŒºç®¡ç†

## ğŸ“¦ å±•é¡¹å‘½åè§„èŒƒ

- **å±•é¡¹ç›®å½•å**ï¼šæ”¯æŒä¸­æ–‡åç§°ï¼Œå¦‚ `Aé¦†å±•é¡¹1`ã€`Bé¦†å±•é¡¹2` ç­‰
- **åŒ…å**ï¼šè‡ªåŠ¨ç”Ÿæˆç¬¦åˆnpmè§„èŒƒçš„åŒ…åï¼ˆä¸­æ–‡åç§°ä¼šè½¬æ¢ä¸ºç¼–ç ï¼‰
- **å‘½åå»ºè®®**ï¼š
  - ä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼Œå¦‚ï¼š`Aé¦†å±•é¡¹1`ã€`äº’åŠ¨ä½“éªŒåŒº`ã€`å†å²å±•ç¤ºåŒº`
  - ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°å­—ç¼–å·ï¼š`01`ã€`02` ç­‰

## ğŸ”§ å¼€å‘å»ºè®®

1. **åˆ›å»ºæ–°å±•é¡¹**ï¼šä½¿ç”¨ `npm run new <name>` å‘½ä»¤ï¼Œæ”¯æŒä¸­æ–‡åç§°ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ ‡å‡†ç»“æ„
2. **ç«¯å£å†²çª**ï¼šå¦‚æœå¤šä¸ªå±•é¡¹åŒæ—¶è¿è¡Œï¼ŒReactä¼šæç¤ºç«¯å£å†²çªï¼Œå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ç«¯å£
3. **å…±äº«ä»£ç **ï¼šå¯ä»¥åœ¨æ ¹ç›®å½•åˆ›å»º `packages/shared` ç›®å½•å­˜æ”¾å…¬å…±ä»£ç 
4. **ç¯å¢ƒå˜é‡**ï¼šæ¯ä¸ªå±•é¡¹å¯ä»¥æœ‰è‡ªå·±çš„ `.env` æ–‡ä»¶

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºå†…éƒ¨é¡¹ç›®ã€‚
